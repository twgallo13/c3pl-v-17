import{u as R,R as d,g as P,s as w,c as E,j as e,L as h}from"./index-wFmH04N_.js";import{c as O,s as c,b as N,a as j}from"./products-api-iTcPc5eP.js";function C(){const{id:i=""}=R(),[p,f]=d.useState(!0),[t,b]=d.useState(null),[g,v]=d.useState(P());d.useEffect(()=>w(v),[]);const[o,y]=d.useState(!1),S=E([g],["Admin","Finance"]).allowed,[m,u]=d.useState({});return d.useEffect(()=>{(async()=>{const s=await O(i);b(s);const a=(s==null?void 0:s.assigned_rates)??{},n={};Object.entries(a).forEach(([l,r])=>{const x=typeof r=="number"?r:Number(r);Number.isNaN(x)||(n[l]=x)}),u(n),f(!1)})()},[i]),p?e.jsx("div",{className:"rounded border p-4 text-sm",children:"Loading product…"}):t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded border p-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:c(t.sku)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c(t.description??"")})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"rounded border p-4",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Size Class"}),e.jsx("div",{className:"font-medium",children:c(t.size_class??"")})]}),e.jsxs("div",{className:"rounded border p-4",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Monthly Storage"}),e.jsx("div",{className:"font-medium",children:N(j(t.rate_monthly_storage,0))})]}),e.jsxs("div",{className:"rounded border p-4",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Vendor"}),e.jsx("div",{className:"font-medium",children:c(t.vendor??"")})]})]}),e.jsxs("div",{className:"rounded border p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:"Assigned Rates"}),e.jsx("button",{type:"button",onClick:()=>y(s=>!s),className:"text-sm underline",children:o?"Close Edit":"Edit Rates"})]}),!t.assigned_rates||Object.keys(t.assigned_rates).length===0?e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"No assigned rates."}):e.jsx("ul",{className:"text-sm grid md:grid-cols-2 gap-2 mb-2",children:Object.entries(t.assigned_rates).map(([s,a])=>e.jsxs("li",{className:"flex justify-between border rounded px-2 py-1",children:[e.jsx("span",{className:"mr-4",children:s}),e.jsx("span",{children:N(j(a,0))})]},s))}),o&&e.jsx("div",{className:"rounded border p-3 bg-muted/10",children:S?e.jsxs("form",{onSubmit:s=>{s.preventDefault()},className:"space-y-3",children:[e.jsx("div",{className:"grid md:grid-cols-2 gap-2",children:Object.keys(m).length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No rates to edit."}):Object.entries(m).map(([s,a])=>e.jsxs("label",{className:"text-sm",children:[e.jsx("span",{className:"block mb-1",children:s}),e.jsx("input",{inputMode:"decimal",value:String(a),onChange:n=>{const l=Number(n.target.value);u(r=>({...r,[s]:Number.isNaN(l)?0:l}))},className:"border rounded px-2 py-1 w-full"})]},s))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"submit",className:"border rounded px-3 py-1 text-sm opacity-60 cursor-not-allowed",disabled:!0,title:"UI-only shell; persistence not implemented",children:"Save (disabled)"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"UI shell only — saving is intentionally disabled."})]})]}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"You don't have permission to edit rates. (Read-only)"})})]}),e.jsx(h,{to:"/products",className:"underline text-sm",children:"← Back to Products"})]}):e.jsxs("div",{className:"rounded border p-4",children:[e.jsx("h3",{className:"font-medium mb-1",children:"Product not found"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"The product could not be loaded (API off or ID not found)."}),e.jsx(h,{to:"/products",className:"underline text-sm",children:"Back to Products"})]})}export{C as default};
