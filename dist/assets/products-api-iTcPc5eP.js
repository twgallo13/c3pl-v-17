function r(n){return Array.isArray(n)?n:[]}function c(n,o=0){return typeof n=="number"&&Number.isFinite(n)?n:typeof n=="string"&&n.trim()!==""&&!Number.isNaN(Number(n))?Number(n):o}function e(n,o=""){return typeof n=="string"?n:o}function l(n){const o=c(n,0);return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:2}).format(o)}function i(){return"mock".toLowerCase()==="mock"}async function f(){if(!i())return[];try{const n=i()?"/mock/products.json":"/api/products",o=await fetch(n,{method:"GET"});if(!o.ok)return[];const u=await o.json().catch(()=>({}));return r((u==null?void 0:u.items)??u).map(t=>({id:e((t==null?void 0:t.id)||(t==null?void 0:t.sku)),sku:e(t==null?void 0:t.sku),description:e((t==null?void 0:t.description)??""),size_class:e((t==null?void 0:t.size_class)??""),rate_monthly_storage:c(t==null?void 0:t.rate_monthly_storage,0)}))}catch{return[]}}async function m(n){if(!i())return null;try{const o=i()?"/mock/products.json":`/api/products/${encodeURIComponent(n)}`,u=await fetch(o,{method:"GET"});if(!u.ok)return null;if(i()){const s=await u.json().catch(()=>[]),t=r(s).find(a=>e(a==null?void 0:a.id)===n||e(a==null?void 0:a.sku)===n);return t?{id:e((t==null?void 0:t.id)||(t==null?void 0:t.sku)||n),sku:e((t==null?void 0:t.sku)||n),description:e((t==null?void 0:t.description)??""),size_class:e((t==null?void 0:t.size_class)??""),rate_monthly_storage:c(t==null?void 0:t.rate_monthly_storage,0),attributes:(t==null?void 0:t.attributes)??null,assigned_rates:(t==null?void 0:t.assigned_rates)??null,vendor:t!=null&&t.vendor?String(t.vendor):null}:null}else{const s=await u.json().catch(()=>null);return s?{id:e((s==null?void 0:s.id)||(s==null?void 0:s.sku)||n),sku:e((s==null?void 0:s.sku)||n),description:e((s==null?void 0:s.description)??""),size_class:e((s==null?void 0:s.size_class)??""),rate_monthly_storage:c(s==null?void 0:s.rate_monthly_storage,0),attributes:(s==null?void 0:s.attributes)??null,assigned_rates:(s==null?void 0:s.assigned_rates)??null,vendor:s!=null&&s.vendor?String(s.vendor):null}:null}}catch{return null}}export{c as a,l as b,m as c,f,e as s};
