import{R as t,j as e,L as S}from"./index-wFmH04N_.js";import{f as v,s as a,a as u,b as w}from"./products-api-iTcPc5eP.js";function z(){const[d,x]=t.useState(!0),[r,h]=t.useState([]),[c,p]=t.useState(""),[l,j]=t.useState("All"),[n,f]=t.useState("");t.useEffect(()=>{(async()=>{const s=await v();h(Array.isArray(s)?s:[]),x(!1)})()},[]);const i=t.useMemo(()=>{const s=c.trim().toLowerCase(),m=Number(n);return r.filter(o=>{const g=!s||a(o.sku).toLowerCase().includes(s)||a(o.description??"").toLowerCase().includes(s),N=l==="All"||a(o.size_class??"")===l,y=u(o.rate_monthly_storage,0),b=!Number.isFinite(m)||n===""||y>=m;return g&&N&&b})},[r,c,l,n]);return e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"rounded border p-4",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Products"}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center mb-3",children:[e.jsx("input",{value:c,onChange:s=>p(s.target.value),placeholder:"Search SKU or description…",className:"border rounded px-3 py-2 text-sm min-w-[240px]","aria-label":"Search products"}),e.jsxs("select",{value:l,onChange:s=>j(s.target.value),className:"border rounded px-3 py-2 text-sm","aria-label":"Filter by size class",children:[e.jsx("option",{value:"All",children:"All sizes"}),e.jsx("option",{value:"Small",children:"Small"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Large",children:"Large"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Min monthly storage"}),e.jsx("input",{inputMode:"decimal",value:n,onChange:s=>f(s.target.value),placeholder:"0.00",className:"border rounded px-2 py-2 text-sm w-28","aria-label":"Minimum monthly storage rate"})]}),e.jsx("div",{className:"ml-auto text-xs text-muted-foreground",children:d?"Loading…":`${i.length} of ${r.length} shown`})]}),d?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading products…"}):r.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No products found. (API flag off or empty dataset)"}):i.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No results match your filters."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left border-b",children:[e.jsx("th",{className:"py-2 pr-3",children:"SKU"}),e.jsx("th",{className:"py-2 pr-3",children:"Description"}),e.jsx("th",{className:"py-2 pr-3",children:"Size"}),e.jsx("th",{className:"py-2",children:"Monthly Storage"})]})}),e.jsx("tbody",{children:i.map(s=>e.jsxs("tr",{className:"border-b last:border-0",children:[e.jsx("td",{className:"py-2 pr-3 font-medium",children:e.jsx(S,{to:`/products/${encodeURIComponent(s.id)}`,className:"underline",children:a(s.sku)})}),e.jsx("td",{className:"py-2 pr-3",children:a(s.description??"")}),e.jsx("td",{className:"py-2 pr-3",children:a(s.size_class??"")}),e.jsx("td",{className:"py-2",children:w(u(s.rate_monthly_storage,0))})]},s.id))})]})})]})})}export{z as default};
